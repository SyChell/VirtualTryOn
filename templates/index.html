<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Try-On | Dein Look</title>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Main Application -->
    <div id="app" class="app-container">
        <!-- Header -->
        <header class="header">
            <nav class="nav-categories">
                <button class="nav-item active" data-category="hosen">Hosen</button>
                <button class="nav-item" data-category="roecke">Röcke</button>
                <button class="nav-item" data-category="kleider">Kleider</button>
                <button class="nav-item" data-category="jacken">Jacken</button>
                <button class="nav-item" data-category="pullover">Pullover</button>
                <button class="nav-item" data-category="schuhe">Schuhe</button>
            </nav>
            <div class="header-actions">
                <button class="icon-btn" aria-label="Suchen">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </button>
                <button class="icon-btn" aria-label="Konto">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </button>
                <button class="icon-btn cart-btn" id="cartBtn" aria-label="Warenkorb">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                        <path d="M3 6h18"></path>
                        <path d="M16 10a4 4 0 0 1-8 0"></path>
                    </svg>
                    <span class="cart-badge" id="cartBadge">0</span>
                </button>
                <button class="icon-btn" aria-label="Mehr">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="1"></circle>
                        <circle cx="12" cy="5" r="1"></circle>
                        <circle cx="12" cy="19" r="1"></circle>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Products Grid -->
            <section class="products-section">
                <div class="products-grid" id="productsGrid">
                    <!-- Products loaded dynamically -->
                </div>
            </section>

            <!-- Divider -->
            <div class="divider"></div>

            <!-- Selection Panel -->
            <section class="selection-section">
                <div class="selected-items" id="selectedItems">
                    <!-- Selected items appear here -->
                </div>
                <div class="selection-hint" id="selectionHint">
                    <div class="hint-content">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="opacity: 0.4;">
                            <path d="M12 2L12 22M12 2L8 6M12 2L16 6M12 22L8 18M12 22L16 18"></path>
                            <rect x="4" y="8" width="16" height="8" rx="2" stroke-dasharray="3 3"></rect>
                        </svg>
                        <p>Ziehe Produkte hierher, um deinen Look zusammenzustellen</p>
                    </div>
                </div>
                <button class="btn-generate" id="btnGenerate" disabled>
                    LOOK GENERIEREN
                </button>
            </section>
        </main>
    </div>

    <!-- Result Modal -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <header class="modal-header">
                <span class="modal-title">Dein Look</span>
                <div class="header-actions">
                    <button class="icon-btn" aria-label="Suchen">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                    <button class="icon-btn" aria-label="Konto">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </button>
                    <button class="icon-btn cart-btn" aria-label="Warenkorb">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                            <path d="M3 6h18"></path>
                            <path d="M16 10a4 4 0 0 1-8 0"></path>
                        </svg>
                        <span class="cart-badge" id="cartBadge2">0</span>
                    </button>
                    <button class="icon-btn" aria-label="Mehr">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </button>
                </div>
            </header>

            <div class="modal-body">
                <!-- Generated Look Image -->
                <div class="look-preview">
                    <img id="generatedLookImage" src="" alt="Generierter Look">
                </div>

                <!-- Divider -->
                <div class="divider"></div>

                <!-- Product Details with Size Selection -->
                <div class="look-details" id="lookDetails">
                    <!-- Product items with size selection loaded here -->
                </div>
            </div>

            <!-- Action Buttons (outside modal-body to stay fixed at bottom) -->
            <div class="modal-actions">
                <button class="btn-primary" id="btnAddToCart">
                    LOOK IN DEN WARENKORB
                </button>
                <button class="btn-secondary" id="btnCustomize">
                    Look anpassen
                    <span class="btn-icon">ℹ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Look wird generiert...</p>
    </div>

    <!-- Checkout Success Modal -->
    <div class="modal checkout-modal" id="checkoutModal">
        <div class="modal-content checkout-content">
            <button class="checkout-close-x" id="closeCheckoutX" aria-label="Schließen">×</button>
            <div class="checkout-success">
                <div class="checkout-header">
                    <div class="demo-badge">DEMO</div>
                    <div class="success-icon">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="m9 12 2 2 4-4"></path>
                        </svg>
                    </div>
                    <h2>Bestellung abgeschlossen!</h2>
                    <p class="checkout-subtitle">Vielen Dank für Ihre Bestellung</p>
                    <div class="order-number">Bestellnummer: #<span id="orderNumber">000000</span></div>
                </div>
                
                <div class="checkout-body">
                    <div class="checkout-left">
                        <h3>Ihre Artikel</h3>
                        <div class="checkout-summary" id="checkoutSummary">
                            <!-- Order summary items appear here -->
                        </div>
                    </div>
                    
                    <div class="checkout-right">
                        <h3>Bestellübersicht</h3>
                        <div class="checkout-details">
                            <div class="checkout-detail-row">
                                <span>Zwischensumme</span>
                                <span id="checkoutSubtotal">0,00 €</span>
                            </div>
                            <div class="checkout-detail-row">
                                <span>Versand</span>
                                <span class="free-shipping">Kostenlos</span>
                            </div>
                            <div class="checkout-detail-row total">
                                <span>Gesamtsumme</span>
                                <span id="checkoutTotal">0,00 €</span>
                            </div>
                        </div>
                        
                        <div class="checkout-shipping">
                            <div class="shipping-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="1" y="3" width="15" height="13"></rect>
                                    <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
                                    <circle cx="5.5" cy="18.5" r="2.5"></circle>
                                    <circle cx="18.5" cy="18.5" r="2.5"></circle>
                                </svg>
                            </div>
                            <div class="shipping-info">
                                <span class="shipping-label">Lieferung</span>
                                <span class="shipping-date" id="deliveryDate">--</span>
                            </div>
                        </div>
                        
                        <div class="checkout-info">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 16v-4"></path>
                                <path d="M12 8h.01"></path>
                            </svg>
                            <p>Dies ist eine Demo. Es wurde keine echte Bestellung aufgegeben.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="checkout-footer">
                <button class="btn-primary checkout-close-btn" id="closeCheckoutBtn">
                    Weiter shoppen
                </button>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal cart-modal" id="cartModal">
        <div class="modal-content">
            <header class="modal-header cart-header">
                <button class="back-btn" id="continueShoppingBtn" aria-label="Zurück">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5"></path>
                        <path d="m12 19-7-7 7-7"></path>
                    </svg>
                    <span>Weiter einkaufen</span>
                </button>
                <span class="modal-title">Warenkorb</span>
                <button class="close-btn" id="closeCartBtn">×</button>
            </header>

            <div class="modal-body cart-body">
                <div class="cart-empty" id="cartEmpty">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="1.5">
                        <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                        <path d="M3 6h18"></path>
                        <path d="M16 10a4 4 0 0 1-8 0"></path>
                    </svg>
                    <p>Dein Warenkorb ist leer</p>
                </div>
                <div class="cart-items" id="cartItems">
                    <!-- Cart items loaded here -->
                </div>
            </div>

            <div class="cart-footer">
                <div class="cart-total-row">
                    <span class="cart-total-label">Gesamtsumme:</span>
                    <span class="cart-total-price" id="cartTotal">0,00 €</span>
                </div>
                <div class="cart-actions">
                    <button class="btn-secondary" id="clearCartBtn">Warenkorb leeren</button>
                    <button class="btn-primary" id="checkoutBtn">Zur Kasse</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
